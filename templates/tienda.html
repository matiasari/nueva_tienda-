<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Bazar_Guille</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font Awesome -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- Tu CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='estilos.css') }}">
</head>

<body>

<header class="header">
    <div class="header-left">
        <img src="{{ url_for('static', filename='logo.ico') }}" class="logo">
        <span class="nombre">BAZAR_GUILLE</span>
    </div>

    <div class="header-right">
        <a href="/carrito" class="carrito-btn">
            游 Carrito
            {% if carrito_total > 0 %}
                <span class="contador">{{ carrito_total }}</span>
            {% endif %}
        </a>
    </div>
</header>

<div class="categorias">
    <a href="/">Todos</a>
    <a href="/?categoria=Cocina">Cocina</a>
    <a href="/?categoria=Ba침o">Ba침o</a>
    <a href="/?categoria=Decoraci칩n">Decoraci칩n</a>
    <a href="/?categoria=Limpieza">Limpieza</a>
</div>

<form method="get" action="/" class="buscador">
    <input type="text" name="q" placeholder="Buscar producto...">
    <button type="submit">Buscar</button>
</form>

<div class="productos">
{% for p in productos %}
    <div class="card">
        {% if p.imagen %}
           <img src="{{ url_for('static', filename='uploads/' + p.imagen) }}" 
     onclick="ampliarImagen(this.src)" 
     style="cursor: pointer;">
        {% endif %}
        <h3>{{ p.nombre }}</h3>
        <p>$ {{ p.precio }}</p>

        {% if p.stock > 0 %}
            <p class="stock">Stock: {{ p.stock }}</p>
            <a href="/agregar_carrito/{{ p.id }}" class="btn-carrito">
                游 Agregar al carrito
            </a>
        {% else %}
            <p class="sin-stock">Sin stock</p>
        {% endif %}
    </div>
{% endfor %}
</div>

<!-- FOOTER -->
<footer class="footer">
    <a href="https://www.instagram.com/bazar_guille/"
       target="_blank"
       class="instagram-btn">
        <i class="fa-brands fa-instagram"></i>
        Seguinos en Instagram
    </a>

    <p>
        Desarrollado por <strong>bazar_guille</strong><br>
        Todos los derechos reservados 춸 Bazar_Guille
    </p>
</footer>
<div id="modalImagen" class="modal-foto" onclick="this.style.display='none'">
    <span class="cerrar-modal">&times;</span>
    <img id="imgExpandida" class="modal-contenido">
</div>

<script>
function ampliarImagen(src) {
    const modal = document.getElementById("modalImagen");
    const imagenGrande = document.getElementById("imgExpandida");
    
    modal.style.display = "flex"; // Muestra el fondo oscuro
    imagenGrande.src = src;       // Pone la foto que tocaste en el centro
}
</script>
</body>
</html>